<!DOCTYPE html>
<html>
<head>
  <title>Image Links with Copy Button</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      text-align: left;
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #f2f2f2;
    }
    button {
      padding: 5px 10px;
      cursor: pointer;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 4px;
    }
    button:active {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>Image Links with Copy Button</h1>
  <table>
    <thead>
      <tr>
        <th>Sl No.</th>
        <th>Filename</th>
        <th>URL</th>
        <th>Copy</th>
      </tr>
    </thead>
    <tbody id="imageTable">
      <tr><td colspan="4">Loading...</td></tr>
    </tbody>
  </table>

  <script>
    const username = "darshan0511";
    const repo = "images";
    const folderPath = ""; // root folder

    async function fetchImages() {
      const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${folderPath}`;
      const res = await fetch(apiUrl);
      const files = await res.json();

      const table = document.getElementById("imageTable");
      table.innerHTML = "";

      let count = 1;
      files.forEach(file => {
        if (file.type === "file" && /\.(jpg|jpeg|png|gif|webp)$/i.test(file.name)) {
          const row = document.createElement("tr");

          const idCell = document.createElement("td");
          idCell.textContent = count++;

          const nameCell = document.createElement("td");
          nameCell.textContent = file.name;

          const urlCell = document.createElement("td");
          urlCell.textContent = file.download_url;

          const copyCell = document.createElement("td");
          const copyBtn = document.createElement("button");
          copyBtn.textContent = "Copy Link";
          copyBtn.onclick = () => {
            navigator.clipboard.writeText(file.download_url).then(() => {
              copyBtn.textContent = "Copied!";
              setTimeout(() => copyBtn.textContent = "Copy Link", 1500);
            }).catch(() => alert("Failed to copy!"));
          };
          copyCell.appendChild(copyBtn);

          row.appendChild(idCell);
          row.appendChild(nameCell);
          row.appendChild(urlCell);
          row.appendChild(copyCell);
          table.appendChild(row);
        }
      });
    }

    fetchImages();
  </script>
</body>
</html>
